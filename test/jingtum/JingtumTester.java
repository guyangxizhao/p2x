package jingtum;

import static org.junit.Assert.*;
import net.sf.json.JSONObject;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;

import p2x.jingtum.https.APICallClient;

public class JingtumTester {
	private Jingtum jing = null;
	private APICallClient apiClient = null;
	@Before
	public void setUp() throws Exception {
		jing = new Jingtum();
		apiClient=new APICallClient();
	}

	@After
	public void tearDown() throws Exception {
		jing = null;
		apiClient=null;
	}

//	@Test
	public void testRegister() {
		try {
			String[] rs = jing.register();
			assertNotNull(rs);
			assertTrue(rs.length == 2);
			assertTrue(rs[0].length() > 0);
			assertTrue(rs[1].length() > 0);
		} catch (JingtumCallException e) {
			e.printStackTrace();
		}
	}
//	@Test
	public void testSettrut(){
		/*
		 * 	//jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS  z---
			//sniENPnL4dJjaQv5xVJ9kGAZbin1p
			//jp64GVM12GPjh9S1Df3yE3114i4FHDjso2  -p2x--to_address
			//snfddURKmMmiUszH2au7dyM4qiR6M
		 */
		//8200000013000020150902201509300120000003
		//jpw9h3c2C6Ftu5KyrqQxnC3ZC6JGrSNke5
		//ssNqvBp4qJSA4nbp2CpptN9oK3G1o
		 boolean rs=jing.setTrust(
				"jp64GVM12GPjh9S1Df3yE3114i4FHDjso2", 
				"snfddURKmMmiUszH2au7dyM4qiR6M", 
				"99999999", 
				"8100000003000020150805197001010120101536", 
				"jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS"
				);
		String[]  rss=jing.transferToBorrowers("jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS", "sniENPnL4dJjaQv5xVJ9kGAZbin1p", "10000", "jp64GVM12GPjh9S1Df3yE3114i4FHDjso2", "8100000003000020150805197001010120101536",  "8100000003000020150805197001010120101536");
	}
	
	//8200000013000020150906201509300120000006
	//jnniY8WGtSbrPPUBMWFbXfiibEQtdEpE11    95
	//snUUxWxYgdNN24JJ6yjaZPtoJkdBY
	//jhXkTHfd88E7x6LyroPfUyCx5Q1PpUkznH   147
	//shGddgJryAeo9ZTvUQSRwFQ4PHE3f
	//
	//@Test
	public void testSet(){
		/**
		 * 
		 *
		 *CNY
SWT
8200000013000020150902201509300120000003
8400000013000020150906201509300120000004
8200000013000020150906201509300120000006
8200000013000020150906201509300120000007
8200000013000020150906201509300120000008
8200000013000020150908201509300120000009
820000001300002015090920150930012000000A
840000000e000020150910201509300120000002
820000000c000020150916201509300120000006
820000000c000020150916201509300120000007
820000000c000020150916201509300120000008
820000000c000020150916201509300120000009
820000000c00002015091620150930012000000a
820000000c00002015091620150930012000000b
820000000c00002015091620150930012000000c
8200000017000020150925201609180120000001
8200000017000020150930201510100120000001
8200000019000020150929201510100120000001
8200000019000020150928201510100120000001
820000001b000020150930201510100120000001
820000001b000020150929201510100120000001
820000001a000020150929201510100120000001
820000001a000020150928201510100120000001
820000001b000020150930201510100120000005
820000001b000020150930201510100120000006
820000001b000020150930201510100120000007
820000001b000020150930201510100120000008
8200000017000020150930201510100120000004
8200000017000020150930201510100120000005
8200000017000020151008201511270120000006
JPY
8000000002000020150512000000000120000001

			
		 */
		JSONObject json =null;
		String[] str={
				"CNY",
				"8200000013000020150902201509300120000003",
				"8400000013000020150906201509300120000004",
				"8200000013000020150906201509300120000006",
				"8200000013000020150906201509300120000007",
				"8200000013000020150906201509300120000008",
				"8200000013000020150908201509300120000009",
				"820000001300002015090920150930012000000A",
				"840000000e000020150910201509300120000002",
				"820000000c000020150916201509300120000006",
				"820000000c000020150916201509300120000007",
				"820000000c000020150916201509300120000008",
				"820000000c000020150916201509300120000009",
				"820000000c00002015091620150930012000000a",
				"820000000c00002015091620150930012000000b",
				"820000000c00002015091620150930012000000c",
				"8200000017000020150925201609180120000001",
				"8200000017000020150930201510100120000001",
				"8200000019000020150929201510100120000001",
				"8200000019000020150928201510100120000001",
				"820000001b000020150930201510100120000001",
				"820000001b000020150929201510100120000001",
				"820000001a000020150929201510100120000001",
				"820000001a000020150928201510100120000001",
				"820000001b000020150930201510100120000005",
				"820000001b000020150930201510100120000006",
				"820000001b000020150930201510100120000007",
				"820000001b000020150930201510100120000008",
				"8200000017000020150930201510100120000004",
				"8200000017000020150930201510100120000005",
				"8200000017000020151008201511270120000006",
				"JPY",
				"8000000002000020150512000000000120000001",
				"8200000017000020151008201511270120000006"};
		for (int i = 0; i <str.length; i++) {
			String currency=str[i];
			String amount="20";
			String bank="jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS";
			String bank_secret="sniENPnL4dJjaQv5xVJ9kGAZbin1p";
			
//			String address="jMvQbPFhoTCVzwgbNtMx5QXWHdwT7wzEJ6";//148
//			String secret="saaA72xW9jjgT362tncZWaJCSBo5U";
//			
			String address="jNkooAgHx82BW5mb9WqS1YEYkgqeARJBED";//147
			String secret="ss22wFnYcNDV3v3RnEswVWuVsqz2u";
			
//			String address="jhXkTHfd88E7x6LyroPfUyCx5Q1PpUkznH";
//			String secret="shGddgJryAeo9ZTvUQSRwFQ4PHE3f";
			
//			String address="jKJzjFzBhQbgcVaSXXhqbfeqtedfpMZTes";
//			String secret="snVEwWi4SK6AT1AKdhDyzRk4zz7pc";
			
			json=apiClient.apiCall("set_trust",
					address,
					secret,
					"99999999",
					currency,//币种 唯一码
					"jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS");
			
			json = apiClient.apiCall("payment",
					bank,
					bank_secret,
					amount+".10",
					currency,//币种  商品唯一码
					currency,//币种 商品唯一码
					address,
					amount+".00",
					"",
					"");
		}
	}
	@Test
	public void testDoPaymentSWT() {
		JSONObject json =null;
//		json=apiClient.apiCall("set_trust",
//				"jpw9h3c2C6Ftu5KyrqQxnC3ZC6JGrSNke5",
//				"ssNqvBp4qJSA4nbp2CpptN9oK3G1o",
//				"99999999",
//				"CNY",//币种 唯一码
//				"jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS");
//		jpw9h3c2C6Ftu5KyrqQxnC3ZC6JGrSNke5
//		ssNqvBp4qJSA4nbp2CpptN9oK3G1o
		json = apiClient.apiCall("payment",
		"jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS",
		"sniENPnL4dJjaQv5xVJ9kGAZbin1p",
		"1000.67890",
		"SWT",//币种  商品唯一码
		"SWT",//币种 商品唯一码
		"j4FkiT1Dca922wy4D5N7v5kr4rSxxuCM2N",
		"1000.67",
		"",
		"");
	}

	
	

}
