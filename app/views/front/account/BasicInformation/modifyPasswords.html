<!-- 右侧内容区域 我的借款账单 -->
<div class="content">
	<input type="hidden" id="encryString" name="encryString" value="${user?.name}">
	#{if flash?.type=="Password"}
	 <div class="repayment repaymentLetter">
        <div class="safety-title">
          <span>修改登录密码</span>
          <a class="close" href="@{front.account.basicInformation.safetyInformation()}">
            <span aria-hidden="true">×</span>
          </a>
        </div>
        <div class="safety-wrap">
          <p class="inputp pbottb">
            <i class="fl-4">*</i>
            <span>原登录密码：</span>
            <input class="form-control" value="" placeholder="" type="password" id="oldPassword">
          </p>
          <p class="inputp pbottb">
            <i class="fl-4">*</i>
            <span>新登录密码：</span>
            <input class="form-control" value="" placeholder="" type="password" id="newPassword1">
          </p>
          <p class="inputp pbottb">
            <i>*</i>
            <span>确认新登录密码：</span>
            <input class="form-control" value="" placeholder="" type="password" id="newPassword2">
          </p>
          <p>
            <a class="updatebtn" id="loginPwd">提交修改</a>
          </p>
          <div class="prompt gmt0">
            <span>温馨提示</span>
            <p><i>1</i>为保障您的资金更安全，修改密码不要与网站交易密码相同</p>
            <p><i>2</i>修改密码要求6-20位，必须包含字母和数字，可以有特殊字符，不能有空格。</p>
          </div>
        </div>
      </div>
	
	#{/if}
	<!-- 修改交易密码 -->
	#{if flash?.type=="payPassword"}
	<div class="repayment repaymentLetter">
        <div class="safety-title">
          <span>设置交易密码</span>
          <a class="close" href="@{front.account.basicInformation.safetyInformation()}">
            <span aria-hidden="true">×</span>
          </a>
        </div>
        <div class="safety-wrap">
          <p class="inputp">
            <i>*</i>
            <span>设置交易密码：</span>
            <input class="form-control" value="" placeholder="" type="password" id="addPayPassword1">
           </p>
             <p class="inputp pbottb">
             <i>*</i>
            <span>确认交易密码：</span>
            <input class="form-control" value="" placeholder="" type="password" id="addPayPassword2">
            </p>
          <p>
            <a class="submitbtn" id="addDealPwd">确&nbsp;&nbsp;&nbsp;&nbsp;认</a>
          </p>
          <div class="prompt">
            <span>温馨提示</span>
            <p><i>1</i>为保障您的资金更安全，交易密码不要与网站交易密码相同</p>
            <p><i>2</i>交易密码要求6-20位，必须包含字母和数字，可以有特殊字符，不能有空格。</p>
          </div>
        </div>
      </div>
	#{/if} 
	#{if flash?.type=="payPasswords"}
	<div class="repayment repaymentLetter" id="update">
		<div class="safety-title">
			<span>修改交易密码</span>  
			<a class="close" href="@{front.account.basicInformation.safetyInformation()}">
            <span aria-hidden="true">×</span>
          </a>
		</div>
		<div class="safety-wrap">
			<p class="inputp pbottb">
				<i class="fl-4">*</i> <span>原交易密码：</span> <input
					class="form-control" type="password" id="oldPayPassword">
			</p>
			<p class="inputp pbottb">
				<i class="fl-4">*</i> <span>新交易密码：</span> <input
					class="form-control" type="password" id="newPayPassword1">
			</p>
			<p class="inputp pbottb">
				<i>*</i> <span>确认新交易密码：</span> <input class="form-control"
					type="password" id="newPayPassword2">
			</p>
			<p>
				<a class="updatebtn" id="dealPwd" style="margin-bottom: 0px;">提交修改</a>
				<br>
				<a style="margin-left: 450px;" href="@{front.account.BasicInformation.resetpayPassword()}">忘记交易密码？</a>
			</p>
			<div class="prompt gmt0">
				<span>温馨提示</span>
				<p>
					<i>1</i>为保障您的资金更安全，修改密码不要与网站交易密码相同
				</p>
				<p>
					<i>2</i>修改密码要求6-20位，必须包含字母和数字，可以有特殊字符，不能有空格。
				</p>
			</div>
		</div>
	</div>
	#{/if}
	#{if flash?.type=="payPasswordfrist"}
	<div class="repayment repaymentLetter">
        <div class="safety-title">
          <span>设置交易密码</span>
          <a class="close" href="@{front.account.basicInformation.safetyInformation()}">
            <span aria-hidden="true">×</span>
          </a>
        </div>
        <div class="safety-wrap">
          <div class="success-pop">
            <i class="result-ico"></i>
            <p>设置交易密码成功！</p>
          </div>
        </div>
      </div>
	#{/if}
	#{if flash?.type=="payPasswordsuccess"}
	<div class="repayment repaymentLetter">
        <div class="safety-title">
          <span>修改交易密码</span>
          <a class="close" href="@{front.account.basicInformation.safetyInformation()}">
            <span aria-hidden="true">×</span>
          </a>
        </div>
        <div class="safety-wrap">
          <div class="success-pop">
            <i class="result-ico"></i>
            <p>修改交易密码成功！</p>
          </div>
        </div>
      </div>
	#{/if}
	#{if flash?.type=="Passwordsuccess"}
	
	 <div class="repayment repaymentLetter">
        <div class="safety-title">
          <span>修改登录密码</span>
          <a class="close" href="@{front.account.basicInformation.safetyInformation()}">
            <span aria-hidden="true">×</span>
          </a>
        </div>
        <div class="safety-wrap">
          <div class="success-pop">
            <i class="result-ico"></i>
            <p>登录密码修改成功！</p>
          </div>
        </div>
      </div>
	
	
	#{/if}
</div>

<script type="text/javascript">
     $(function(){
    	 
    	 
    	 
     });
    	 $("#loginPwd").click(function(){
                var oldPassword = $("#oldPassword").val();
          		var newPassword1 = $("#newPassword1").val();
          		var newPassword2 = $("#newPassword2").val();
          		
          		if($.trim(oldPassword) == ""){
          			alert("请输入原密码");
          			return;
          		}
          		if($.trim(newPassword1) == ""){
          			alert("请输入新密码");
          			return;
          		}
          		if($.trim(newPassword1).length < 6 || $.trim(newPassword1).length > 20){
          			alert("密码长度为6-20位字符(不含空格)");
          			return;
              	}
          		if($.trim(newPassword2) == ""){
          			alert("请输入确认密码密码");
          			return;
          		}
          		if(equals(newPassword1,oldPassword)){
          			alert("新密码与原密码一样，请重新输入");
          			return;
                }
          		if($.trim(newPassword1) != $.trim(newPassword2)){
          			alert("两次输入的新密码不一致");
          			return;
          		}
          		$.ajax({     
        	  	 	url:"@{front.account.BasicInformation.savePassword()}",
        	  	    type:'post',
        	  	    dataType:'json',
        	  	    data:{
        	  	    	'oldPassword':oldPassword,'newPassword1':newPassword1,'newPassword2':newPassword2,'encryString':$("#encryString").val()
        	  	    },
        	  	    error:function() {     
        	  	       alert('error');
        	  	    },
        	  	  	success:function(data) {
        	  	  	if(data.error.code < 0) {
				    	alert(data.error.msg);
				    	return;
				    }
				    if(data.error.code>=0){
						 window.location.href="@{front.account.BasicInformation.modifyPassword()}?type=Passwordsuccess";
	                    }
        			}
        	  	});
       });
     
          $("#dealPwd").click(function(){
          
          
          		var oldPayPassword = $("#oldPayPassword").val();
          		var newPayPassword1 = $("#newPayPassword1").val();
          		var newPayPassword2 = $("#newPayPassword2").val();
          		
          		if($.trim(oldPayPassword) == ""){
          			alert("请输入原密码");
          			return;
          		}
          		if($.trim(newPayPassword1) == ""){
          			alert("请输入新密码");
          			return;
          		}
          		if($.trim(newPayPassword1).length < 6 || $.trim(newPayPassword1).length > 20){
          			alert("密码长度为6-20位字符(不含空格)");
          			return;
              	}
          		if($.trim(newPayPassword2)  == ""){
          			alert("请输入确认密码密码");
          			return;
          		}
          		if(equals(oldPayPassword,newPayPassword1)){
          			alert("新密码与原密码一样，请重新输入");
          			return;
                }
          		if($.trim(newPayPassword1) != $.trim(newPayPassword2)){
          			alert("两次输入的新密码不一致");
          			return;
          		}
          		$.ajax({     
        	  	 	url:"@{front.account.BasicInformation.editPayPassword()}",
        	  	    type:'post',
        	  	    dataType:'json',
        	  	    data:{
        	  	    	'oldPayPassword':oldPayPassword,'newPayPassword1':newPayPassword1,'newPayPassword2':newPayPassword2,'encryString':$("#encryString").val()
        	  	    },
        	  	    error:function() {     
        	  	       alert('error');
        	  	    },
        	  	  	success:function(data) {
        	  	  	if(data.error.code < 0) {
				    	alert(data.error.msg);
				    	return;
				    }
				    if(data.error.code>=0){
				    	window.location.href="@{front.account.BasicInformation.modifyPassword()}?type=payPasswordsuccess";
	                    }
        			}
        	  	});
        });
     
          $("#addDealPwd").click(function(){
        	  
          		var addPayPassword1 = $("#addPayPassword1").val();
          		var addPayPassword2 = $("#addPayPassword2").val();
          		
          		if($.trim(addPayPassword1) == ""){
          			alert("请输入交易密码");
          			return;
          		}
          		if($.trim(addPayPassword1).length < 6 || $.trim(addPayPassword1).length > 20){
          			alert("密码长度为6-20位字符(不含空格)");
          			return;
              	}
          		if($.trim(addPayPassword2)  == ""){
          			alert("请输入确认密码密码");
          			return;
          		}
          		if($.trim(addPayPassword1) != $.trim(addPayPassword2)){
          			alert("两次输入的新密码不一致");
          			return;
          		}
          		
          		$.ajax({     
        	  	 	url:"@{front.account.BasicInformation.savePayPassword()}",
        	  	    type:'post',
        	  	    dataType:'json',
        	  	    data:{
        	  	    'newPayPassword1':addPayPassword1,'newPayPassword2':addPayPassword2,'encryString':$("#encryString").val()
        	  	    },
        	  	    error:function() {     
        	  	       alert('error');
        	  	    },
        	  	  	success:function(data) {
        	  	  	if(data.error.code < 0) {
				    	alert(data.error.msg);
				    	return;
				    }
				    if(data.error.code>=0){
				    	window.location.href="@{front.account.BasicInformation.modifyPassword()}?type=payPasswordfrist";
	                    }
        			}
        	  	});
      });
   
</script>
